{"swagger":"2.0","info":{"description":"Service used to account business","version":"1.0","title":"Flop Account Service","contact":{"name":"WeOpt","url":"http://www.we-opt.com","email":"r.gelibert@we-opt.com"}},"host":"localhost:7700","basePath":"/","tags":[{"name":"Accounts Html Services","description":"Accounts rendering html service"},{"name":"Accounts MicroService","description":"Accounts Creation and Management for customers (change password etc..)"},{"name":"Admin","description":"Operations used for administration operation (delete, etc...)"},{"name":"Status","description":"Alive Status"}],"paths":{"/api":{"post":{"tags":["Accounts MicroService"],"summary":"Account creation","description":"You can create an account here","operationId":"createAccountUsingPOST_1","consumes":["application/json"],"produces":["*/*"],"parameters":[{"in":"body","name":"accountDto","description":"accountDto","required":true,"schema":{"$ref":"#/definitions/AccountSignInDTO"}}],"responses":{"200":{"description":"OK","schema":{"type":"object"}},"201":{"description":"Created"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}},"deprecated":false}},"/api/activate/{activationToken}":{"get":{"tags":["Accounts Html Services"],"summary":"Accounts activation","description":"Make the account's activation.","operationId":"accountActivationUsingGET","produces":["*/*"],"parameters":[{"name":"account","in":"query","description":"account","required":true,"type":"string"},{"name":"activationToken","in":"path","description":"activationToken","required":true,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"type":"string"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}},"deprecated":false}},"/api/activate/{email}/resend":{"post":{"tags":["Accounts MicroService"],"summary":"Resend the activation email.","operationId":"resendActivationTokenUsingPOST","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"email","in":"path","description":"email","required":true,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"type":"object"}},"201":{"description":"Created"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}},"deprecated":false}},"/api/admin/activate/{accountEmail}/force":{"post":{"tags":["Admin"],"summary":"Account activation, without token","operationId":"activateAccountUsingPOST","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"accountEmail","in":"path","description":"Email account we want to force the activation.","required":false,"type":"string"}],"responses":{"200":{"description":"OK"},"201":{"description":"Created"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}},"deprecated":false}},"/api/admin/delete/datas":{"delete":{"tags":["Admin"],"summary":"Delete all datas","operationId":"deleteDatasUsingDELETE","produces":["*/*"],"responses":{"200":{"description":"OK","schema":{"type":"object"}},"204":{"description":"No Content"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"}},"deprecated":false}},"/api/api/customer/{customerId}/list":{"get":{"tags":["Accounts MicroService"],"summary":"Customer Find Users Account","description":"Find Users Account action","operationId":"findCustomersAccountUsingGET","produces":["*/*"],"parameters":[{"name":"customerId","in":"path","description":"The customer id","required":false,"type":"integer","format":"int64"},{"name":"page","in":"query","description":"Page number we want to get (from 1 to max page)","required":false,"type":"integer","default":1,"format":"int32","allowEmptyValue":false},{"name":"roles","in":"query","description":"Role filter","required":false,"type":"array","items":{"type":"string","enum":["ADMIN","LIMITED_ADMIN","POKER_ROOM_MANAGER","COMMUNITY_MANAGER"]},"collectionFormat":"multi","allowEmptyValue":false,"enum":["ADMIN","LIMITED_ADMIN","POKER_ROOM_MANAGER","COMMUNITY_MANAGER"]},{"name":"search","in":"query","description":"Search Filter in email (contains) or in firstName (contains) or lastName (equals)","required":false,"type":"string","allowEmptyValue":false},{"name":"size","in":"query","description":"Paging size","required":false,"type":"integer","default":20,"format":"int32","allowEmptyValue":false},{"name":"states","in":"query","description":"Status filter","required":false,"type":"array","items":{"type":"string","enum":["PENDING","VERIFIED"]},"collectionFormat":"multi","allowEmptyValue":false,"enum":["PENDING","VERIFIED"]}],"responses":{"200":{"description":"Result","schema":{"$ref":"#/definitions/Page«CustomerAccount»"}},"400":{"description":"ERR_CUSTOMER_NOT_FOUND - The entity has not been found","schema":{"$ref":"#/definitions/ApiError"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}},"deprecated":false}},"/api/backend-available":{"get":{"tags":["Status"],"summary":"backendAvailable","operationId":"backendAvailableUsingGET","produces":["*/*"],"responses":{"200":{"description":"OK","schema":{"type":"boolean"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}},"deprecated":false}},"/api/change-password":{"put":{"tags":["Accounts MicroService"],"summary":"Change the user password, when he is connected.","operationId":"changePasswordUsingPUT","consumes":["application/json"],"produces":["*/*"],"parameters":[{"in":"body","name":"formDto","description":"The form dto","required":false,"schema":{"$ref":"#/definitions/ChangePasswordFormDTO"}}],"responses":{"200":{"description":"OK","schema":{"type":"object"}},"201":{"description":"Created"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}},"deprecated":false}},"/api/contact-us":{"post":{"tags":["Accounts MicroService"],"summary":"Change the user password, when he is connected.","operationId":"contactUsUsingPOST","consumes":["application/json"],"produces":["*/*"],"parameters":[{"in":"body","name":"formDto","description":"The form dto","required":false,"schema":{"$ref":"#/definitions/ContactUsFormDTO"}}],"responses":{"200":{"description":"OK","schema":{"type":"object"}},"201":{"description":"Created"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}},"deprecated":false}},"/api/customer/":{"post":{"tags":["Accounts MicroService"],"summary":"Customer Account creation","description":"You can create an account here (WAIT, this action is actually only used by Customer Service","operationId":"createAccountUsingPOST","consumes":["application/json"],"produces":["*/*"],"parameters":[{"in":"body","name":"accountDto","description":"accountDto","required":true,"schema":{"$ref":"#/definitions/CustomerAccountSignInDTO"}}],"responses":{"200":{"description":"OK","schema":{"type":"object"}},"201":{"description":"Created"},"204":{"description":"No content","schema":{"type":"object"}},"400":{"description":"The defined type does not exists. - ERR_ACCOUNT_012 \nA user with the same email already exists - ERR_ACOUNT_001","schema":{"$ref":"#/definitions/ApiError"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}},"deprecated":false}},"/api/customer/{accountEmail}/change_password":{"put":{"tags":["Accounts MicroService"],"summary":"Customer change password","description":"change the password for a loggued customer","operationId":"customerChangePasswordUsingPUT","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"accountEmail","in":"path","description":"The customer email","required":false,"type":"string"},{"in":"body","name":"changePasswordDto","description":"The change password","required":false,"schema":{"$ref":"#/definitions/ChangePasswordFormDTO"}}],"responses":{"200":{"description":"OK","schema":{"type":"object"}},"201":{"description":"Created"},"204":{"description":"No content","schema":{"type":"object"}},"400":{"description":"ERR_ACCOUNT_003 - The password is invalid according to our compliance or does not match with previous one. \nERROR_ACCOUNT_NOT_FOUND - no entity found with id or unique attribute.","schema":{"$ref":"#/definitions/ApiError"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}},"deprecated":false}},"/api/customer/{accountEmail}/forgot_password":{"post":{"tags":["Accounts MicroService"],"summary":"Customer Forgot password","description":"Forgot password action","operationId":"forgotPasswordActionUsingPOST","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"accountEmail","in":"path","description":"The customer email","required":false,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"type":"object"}},"201":{"description":"Created"},"204":{"description":"No content","schema":{"type":"object"}},"400":{"schema":{"$ref":"#/definitions/ApiError"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}},"deprecated":false}},"/api/customer/{accountEmail}/reset_password":{"get":{"tags":["Accounts MicroService"],"summary":"Customer Account creation","description":"Check if the reset password is ok or no","operationId":"checkResetPasswordUsingGET","produces":["*/*"],"parameters":[{"name":"accountEmail","in":"path","description":"The customer email","required":false,"type":"string"},{"name":"resetPasswordToken","in":"query","description":"The reset password","required":false,"type":"string","allowEmptyValue":false}],"responses":{"200":{"description":"OK","schema":{"type":"object"}},"204":{"description":"No content","schema":{"type":"object"}},"400":{"description":"The reset password does not match. - ERR_ACCOUNT_013 \nThe entity has not been found - ERR_CUSTOMERACCOUNT_NOT_FOUND","schema":{"$ref":"#/definitions/ApiError"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}},"deprecated":false},"post":{"tags":["Accounts MicroService"],"summary":"Customer reset password","description":"reset the password (or first initialisation)","operationId":"customerResetPasswordUsingPOST","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"accountEmail","in":"path","description":"The customer email","required":false,"type":"string"},{"in":"body","name":"resetPasswordDto","description":"The reset password","required":false,"schema":{"$ref":"#/definitions/CustomerResetPasswordFormDTO"}}],"responses":{"200":{"description":"OK","schema":{"type":"object"}},"201":{"description":"Created"},"204":{"description":"No content","schema":{"type":"object"}},"400":{"description":"ERR_ACCOUNT_006 - The token we provided you has expired, please ask us another token by clicking on \\\"Reset Password\\\" again. Thank you. \nERR_ACCOUNT_003 - The password is invalid according to our compliance. \nERR_ACCOUNT_005 - The token is invalid. Are sure we provided you this token and that's the newest one ?\nERROR_ACCOUNT_NOT_FOUND - no entity found with id or unique attribute.","schema":{"$ref":"#/definitions/ApiError"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}},"deprecated":false}},"/api/reset_password/action":{"post":{"tags":["Accounts Html Services"],"summary":"changePassword","operationId":"changePasswordUsingPOST","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"email","in":"query","required":false,"type":"string"},{"name":"password","in":"query","required":false,"type":"string"},{"name":"password_check","in":"query","required":false,"type":"string"},{"name":"token","in":"query","required":false,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"type":"string"}},"201":{"description":"Created"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}},"deprecated":false}},"/api/show-me":{"get":{"tags":["Status"],"summary":"showFirstScreen","operationId":"showFirstScreenUsingGET","produces":["*/*"],"responses":{"200":{"description":"OK","schema":{"type":"boolean"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}},"deprecated":false}},"/api/version":{"get":{"tags":["Accounts MicroService"],"summary":"Service's version","operationId":"versionUsingGET","produces":["*/*"],"responses":{"200":{"description":"OK","schema":{"type":"object"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}},"deprecated":false}},"/api/{email}/reset_password":{"post":{"tags":["Accounts MicroService"],"summary":"resetPassword","operationId":"resetPasswordUsingPOST","consumes":["application/json"],"produces":["*/*"],"parameters":[{"name":"email","in":"path","description":"email","required":true,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"type":"object"}},"201":{"description":"Created"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}},"deprecated":false}},"/api/{email}/{token}/reset_password":{"get":{"tags":["Accounts Html Services"],"summary":"Accounts password reset","description":"Reset the account password.","operationId":"resetPasswordUsingGET","produces":["*/*"],"parameters":[{"name":"email","in":"path","description":"email","required":true,"type":"string"},{"name":"token","in":"path","description":"token","required":true,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"type":"string"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}},"deprecated":false}}},"definitions":{"AccountSignInDTO":{"type":"object","properties":{"authorities":{"type":"array","items":{"$ref":"#/definitions/GrantedAuthority"}},"email":{"type":"string"},"loginOrigin":{"type":"string","enum":["FLOP_MOBILE","FLOP_AD","FLOP_WEB_ADMIN","WEBSITE","OTHER"]},"managedCasinoId":{"type":"string"},"password":{"type":"string"}},"title":"AccountSignInDTO"},"Address":{"type":"object","properties":{"city":{"type":"string"},"country":{"type":"string"},"countryCode":{"type":"string"},"postalCode":{"type":"string"},"state":{"type":"string"},"streetAddress":{"type":"string"}},"title":"Address"},"ApiError":{"type":"object","properties":{"detailedMessage":{"type":"string"},"errorCode":{"type":"string"},"message":{"type":"string"},"status":{"type":"string","enum":["100 CONTINUE","101 SWITCHING_PROTOCOLS","102 PROCESSING","103 CHECKPOINT","200 OK","201 CREATED","202 ACCEPTED","203 NON_AUTHORITATIVE_INFORMATION","204 NO_CONTENT","205 RESET_CONTENT","206 PARTIAL_CONTENT","207 MULTI_STATUS","208 ALREADY_REPORTED","226 IM_USED","300 MULTIPLE_CHOICES","301 MOVED_PERMANENTLY","302 FOUND","302 MOVED_TEMPORARILY","303 SEE_OTHER","304 NOT_MODIFIED","305 USE_PROXY","307 TEMPORARY_REDIRECT","308 PERMANENT_REDIRECT","400 BAD_REQUEST","401 UNAUTHORIZED","402 PAYMENT_REQUIRED","403 FORBIDDEN","404 NOT_FOUND","405 METHOD_NOT_ALLOWED","406 NOT_ACCEPTABLE","407 PROXY_AUTHENTICATION_REQUIRED","408 REQUEST_TIMEOUT","409 CONFLICT","410 GONE","411 LENGTH_REQUIRED","412 PRECONDITION_FAILED","413 PAYLOAD_TOO_LARGE","413 REQUEST_ENTITY_TOO_LARGE","414 URI_TOO_LONG","414 REQUEST_URI_TOO_LONG","415 UNSUPPORTED_MEDIA_TYPE","416 REQUESTED_RANGE_NOT_SATISFIABLE","417 EXPECTATION_FAILED","418 I_AM_A_TEAPOT","419 INSUFFICIENT_SPACE_ON_RESOURCE","420 METHOD_FAILURE","421 DESTINATION_LOCKED","422 UNPROCESSABLE_ENTITY","423 LOCKED","424 FAILED_DEPENDENCY","426 UPGRADE_REQUIRED","428 PRECONDITION_REQUIRED","429 TOO_MANY_REQUESTS","431 REQUEST_HEADER_FIELDS_TOO_LARGE","451 UNAVAILABLE_FOR_LEGAL_REASONS","500 INTERNAL_SERVER_ERROR","501 NOT_IMPLEMENTED","502 BAD_GATEWAY","503 SERVICE_UNAVAILABLE","504 GATEWAY_TIMEOUT","505 HTTP_VERSION_NOT_SUPPORTED","506 VARIANT_ALSO_NEGOTIATES","507 INSUFFICIENT_STORAGE","508 LOOP_DETECTED","509 BANDWIDTH_LIMIT_EXCEEDED","510 NOT_EXTENDED","511 NETWORK_AUTHENTICATION_REQUIRED"]},"subErrors":{"type":"array","items":{"$ref":"#/definitions/ApiValidationError"}},"timestamp":{"type":"string","example":"yyyy-MM-dd'T'HH:mm:ss.SSS"}},"title":"ApiError"},"ApiValidationError":{"type":"object","properties":{"field":{"type":"string"},"message":{"type":"string"},"object":{"type":"string"},"rejectedValue":{"type":"object"}},"title":"ApiValidationError"},"ChangePasswordFormDTO":{"type":"object","properties":{"currentPassword":{"type":"string"},"newPassword":{"type":"string"},"password_check":{"type":"string"}},"title":"ChangePasswordFormDTO"},"ContactUsFormDTO":{"type":"object","properties":{"content":{"type":"string"},"subject":{"type":"string"}},"title":"ContactUsFormDTO"},"Customer":{"type":"object","properties":{"activationToken":{"type":"string"},"address":{"$ref":"#/definitions/Address"},"brand":{"type":"string"},"brandLowerCaseIndex":{"type":"string"},"casinoId":{"type":"string"},"creationDate":{"type":"string","format":"date-time"},"emailAdminUser":{"type":"string"},"emailContact":{"type":"string"},"id":{"type":"integer","format":"int64"},"licence":{"type":"string"},"licenceAuthority":{"type":"string"},"modificationDate":{"type":"string","format":"date-time"},"phoneNumber":{"type":"string"},"referenceNumber":{"type":"string"},"requestState":{"type":"string","enum":["MAIL_NOT_VALIDATED","PENDING","VALIDATED","REFUSED"]},"type":{"type":"string","enum":["CASINO","OPERATOR"]}},"title":"Customer"},"CustomerAccount":{"type":"object","properties":{"accountRole":{"type":"string","enum":["FLOP_USER","CASINO_MANAGER","OPERATOR_MANAGER","GLOBAL_ADMIN"]},"activationToken":{"type":"string"},"active":{"type":"boolean"},"creationDate":{"type":"string","format":"date-time"},"customer":{"$ref":"#/definitions/Customer"},"email":{"type":"string"},"id":{"type":"integer","format":"int64"},"lastConnexionDate":{"type":"string","format":"date-time"},"managedCasinoId":{"type":"string"},"modificationDate":{"type":"string","format":"date-time"},"nbLoginError":{"type":"integer","format":"int32"},"password":{"type":"string"},"previousConnexionDate":{"type":"string","format":"date-time"},"requestState":{"type":"string","enum":["PENDING","VERIFIED"]},"resetPasswordToken":{"type":"string"},"resetPasswordTokenExpirationDate":{"type":"string","format":"date-time"},"role":{"type":"string","enum":["ADMIN","LIMITED_ADMIN","POKER_ROOM_MANAGER","COMMUNITY_MANAGER"]}},"title":"CustomerAccount"},"CustomerAccountSignInDTO":{"type":"object","properties":{"casinoId":{"type":"string"},"customerId":{"type":"integer","format":"int64"},"customerType":{"type":"string","enum":["CASINO","OPERATOR"]},"email":{"type":"string"},"requestState":{"type":"string","enum":["PENDING","VERIFIED"]},"role":{"type":"string","enum":["ADMIN","LIMITED_ADMIN","POKER_ROOM_MANAGER","COMMUNITY_MANAGER"]}},"title":"CustomerAccountSignInDTO"},"CustomerResetPasswordFormDTO":{"type":"object","properties":{"newPassword":{"type":"string"},"passwordCheck":{"type":"string"},"resetPasswordToken":{"type":"string"}},"title":"CustomerResetPasswordFormDTO"},"GrantedAuthority":{"type":"object","properties":{"authority":{"type":"string"}},"title":"GrantedAuthority"},"Pageable":{"type":"object","properties":{"offset":{"type":"integer","format":"int64"},"pageNumber":{"type":"integer","format":"int32"},"pageSize":{"type":"integer","format":"int32"},"paged":{"type":"boolean"},"sort":{"$ref":"#/definitions/Sort"},"unpaged":{"type":"boolean"}},"title":"Pageable"},"Page«CustomerAccount»":{"type":"object","properties":{"content":{"type":"array","items":{"$ref":"#/definitions/CustomerAccount"}},"empty":{"type":"boolean"},"first":{"type":"boolean"},"last":{"type":"boolean"},"number":{"type":"integer","format":"int32"},"numberOfElements":{"type":"integer","format":"int32"},"pageable":{"$ref":"#/definitions/Pageable"},"size":{"type":"integer","format":"int32"},"sort":{"$ref":"#/definitions/Sort"},"totalElements":{"type":"integer","format":"int64"},"totalPages":{"type":"integer","format":"int32"}},"title":"Page«CustomerAccount»"},"Sort":{"type":"object","properties":{"empty":{"type":"boolean"},"sorted":{"type":"boolean"},"unsorted":{"type":"boolean"}},"title":"Sort"}}}